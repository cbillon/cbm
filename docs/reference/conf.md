# Fichier de configuration

Le fichier de configuration du projet **<nom-du-projet>.yml** se trouve dans le répertoire **projects/<nom-du-projet>**

Exemple de fichiers de configuration


```
  # Configuration de demo
  # generated by cb Sat Dec 28 16:52:57 CET 2024
  demo:
    project: demo
    branch: demo    
  moodle:
    version: 4.5+
  plugins:
    moodle-tool_redis:
      name: Redis management
      source: https://github.com/moodle-an-hochschulen/moodle-tool_redis
      branch: MOODLE_405_STABLE
    moodle-tool_opcache:
      name: Opcache management
      source: https://github.com/moodle-an-hochschulen/moodle-tool_opcache
      branch: MOODLE_405_STABLE

```
Le fichier de configuration comporte 3 parties distinctes
- le projet
- Moodle
- la liste des plugins à installer
## le projet
La plate forme peut gérer plusieurs instance de code.
Le nom du projet est unique.
La base de code set trouve dans le dépot local $MOODLE_SRC sous la branche de même nom que le projet.

## Moodle

Chaque version de Moodle comporte 3 parties par exemple : par exemple 4.5.1 

Une version majeure est définie par les 2 premiers chiffres : 4.5

Le dernier chiffre indiquant les versions mineures.

Moodle suit les concepts [semantic versionnning](versionninnage_semantique.md)

Moodle HQ livre des mises à jour chaque semaine pour les versions mineures maintenues.
Tous les 2 mois, sortie d'une nouvelle version mineure après passage de tests approfondis
voir le détail [ici](https://moodledev.io/general/releases)

Dans le fichier de configuration, il est possible de préciser comme version source de la base de code:

- la dernière version mineure disponible: 5.0 
- la dernière version mineure avec les dernières corrections  : 5.0+
- une version  spécifique : 5.0.1
- une version spécifique définie par un tag : <tag>
- une version spécifique définie par un commit : <commit>

la mise à niveau du dépôt local Moodle se fait en lançant l'option : Mise à jour du cache Moodle

## PLugins

Pour chaque plugin :
- name : description succincte (optionnel)
- version : référence  à utiliser  (doit être compatible avec la version Moodle)

## Import d'un plugin
Les informations (source, branche du plugin) sont obtenues à partir du dépôt officiel des plugins Moodle
Ces informations doivent être renseignées manuellement pour un plugin qui ne provient pas de la liste officielle.
